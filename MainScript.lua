-- if game.placeId != 0 then return end
repeat wait() until game:IsLoaded() and game.Players.LocalPlayer ~= nil and game.Players.LocalPlayer.Character ~= nil

local ReplicatedStorage = game:GetService("ReplicatedStorage")
local ThreadLib = loadstring(game:HttpGet(("https://raw.githubusercontent.com/ThatMG393/AFS-RBLX-Exploit/main/ThreadLib.lua")))()

local repeatTimes = 1300

local ChakraTrainThread = ThreadLib.New(function (thread)
	while thread.active do
		for i = 0, repeatTimes do
			ReplicatedStorage.RSPackage.Events.StatFunction:InvokeServer('Stat', 'Chakra')
		end
	end
end)

local DurabilityTrainThread = ThreadLib.New(function (thread)
	while thread.active do
		for i = 0, repeatTimes do
			ReplicatedStorage.RSPackage.Events.StatFunction:InvokeServer('Stat', 'Durability')
		end
	end
end)

local StrengthTrainThread = ThreadLib.New(function (thread)
	while thread.active do
		for i = 0, repeatTimes do
			ReplicatedStorage.RSPackage.Events.StatFunction:InvokeServer('Stat', 'Strength')
		end
	end
end)

local AutoYenThread = ThreadLib.New(function (thread)
	local plr = game.Players.LocalPlayer
	local dung = { 7220975160,7220986579 }
	
	if not table.find(dung, game.PlaceId) then
		game:GetService("TeleportService"):Teleport(dung[ math.random(1, #dung) ])
		return
	end
	
	repeat wait() until plr.PlayerGui ~= nil and plr.PlayerGui.Main ~= nil and plr.PlayerGui.Main.Notifs ~= nil
	game.Players.LocalPlayer.PlayerGui.Main.Notifs:Destroy()
	repeat wait() until workspace.MouseIgnore ~= nil
	workspace.MouseIgnore:Destroy()
	
	while thread.active do
		for i = 1,10 do
			ReplicatedStorage.RSPackage.Events.GeneralFunction:InvokeServer("LotteryRandomDraw")
			ReplicatedStorage.RSPackage.Events.GeneralEvent:FireServer("SpinFinished")
		end
	end
end)

local GuiService = game:GetService("GuiService")
local UIS = game:getService("UserInputService")

local Rayfield = loadstring(game:HttpGet('https://raw.githubusercontent.com/ThatMG393/Rayfield/main/source.lua'))()

local function showNotif(title, content, actions)
	if actions == nil then
		Rayfield:Notify({
			Title = title,
			Content = content,
			Duration = 3,
			Actions = {
				Ignore = {
					Name = "Okay!"
			   }
			}
		})
		return
	end
	
	Rayfield:Notify({
		Title = title,
		Content = content,
		Duration = 6,
		Actions = actions
	})
end

showNotif("UI made by ThatMG393", "I don't know where some of my friends got some of the scripts.", nil)

local player = game.Players.LocalPlayer
local mouse = player:GetMouse()
x = mouse.ViewSizeX - 24
y = mouse.ViewSizeY - 48

local Window = Rayfield:CreateWindow({
	Name = "MGHub",
	LoadingTitle = "|-- MGHub --|",
	LoadingSubtitle = "by ThatMG393, powered by Rayfield",
	ConfigurationSaving = {
		Enabled = true,
		FolderName = 'MGHub',
		FileName = 'MGHub'
	},
	xSize = x,
	ySize = y
})

local MainTab = Window:CreateTab("Main", 0)

local AutoStatSection = MainTab:CreateSection("Auto Stats")
local AutoChakraToggle = MainTab:CreateToggle({
	Name = "AutoChakra",
	CurrentValue = false,
	Flag = "AutoChakraPref",
	Callback = function(Value)
		if Value then
			ChakraTrainThread:Start()
			showNotif("AutoChakra train started!", "", nil)
		else
			ChakraTrainThread:Stop()
			showNotif("AutoChakra train stopped!", "", nil)
		end
	end
})

local AutoDurabilityToggle = MainTab:CreateToggle({
	Name = "AutoDurability",
	CurrentValue = false,
	Flag = "AutoChakraPrefPref",
	Callback = function(Value)
		if Value then
			DurabilityTrainThread:Start()
			showNotif("AutoDurability train started!", "", nil)
		else
			DurabilityTrainThread:Stop()
			showNotif("AutoDurability train stopped!", "", nil)
		end
	end
})

local AutoStrengthToggle = MainTab:CreateToggle({
	Name = "AutoStrength",
	CurrentValue = false,
	Flag = "AutoStrengthPref",
	Callback = function(Value)
		if Value then
			StrengthTrainThread:Start()
			showNotif("AutoStrength train started!", "", nil)
		else
			StrengthTrainThread:Stop()
			showNotif("AutoStrength train stopped!", "", nil)
		end
	end
})

local AutoYenSection = MainTab:CreateSection("Auto Trains")
local AutoYenToggle = MainTab:CreateToggle({
	Name = "AutoYen",
	CurrentValue = false,
	Flag = "AutoYenPref",
	Callback = function(Value)
		if Value then
			AutoYenThread:Start()
			showNotif("AutoYen started!", "HERE COMES THE MONEY!", nil)
		else
			AutoYenThread:Stop()
			showNotif("AutoYen stopped!", "", nil)
		end
	end
})

local UITab = Window:CreateTab("UI", 0)
local Button = UITab:CreateButton({
	Name = "Destroy UI",
	Callback = function()
		showNotif("Are you sure?", "u sure bro? what if misclick?", {
			Ignore = {
				Name = "Yes!",
				Callback = function ()
					ChakraTrainThread:Destroy()
					DurabilityTrainThread:Destroy()
					StrengthTrainThread:Destroy()
					AutoYenThread:Destroy()
					Rayfield:Destroy()
				end
			}
		})
	end
})